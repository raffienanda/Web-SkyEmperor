<main>
  <section class="welcome">
    <h1>Welcome</h1>
    <p>Silakan Login Member<br>untuk Memulai Gacha</p>
    
    <div style="margin-top: 30px; display: flex; flex-direction: column; align-items: center; gap: 15px;">
      <input type="text" id="login-nama" placeholder="Username Member" 
             style="padding: 12px; width: 300px; border-radius: 10px; border: none; font-size: 16px;">
      
      <input type="text" id="login-kelas" placeholder="Kelas (contoh: REG, VIP, VVIP)" 
             style="padding: 12px; width: 300px; border-radius: 10px; border: none; font-size: 16px;">
      
      <button id="btn-login" class="gacha-btn">Login</button>
    </div>
  </section>
</main>

<script>
  // Script Login langsung di sini biar simpel
  const scriptURL = "https://script.google.com/macros/s/AKfycbx9ezGFBv_Yme4VrP1CHHX2nuDeeXRh7nJ6zenkkUWZ5A5PfPiYz8k3eN8CXukLITK0/exec"; 

  document.getElementById("btn-login").addEventListener("click", async () => {
    const nama = document.getElementById("login-nama").value.trim();
    const kelas = document.getElementById("login-kelas").value.trim();
    const btn = document.getElementById("btn-login");

    if (!nama || !kelas) {
      alert("Nama dan Kelas wajib diisi!");
      return;
    }

    btn.textContent = "Checking...";
    btn.disabled = true;

    const formData = new FormData();
    formData.append("action", "login"); // Kasih tahu backend ini login
    formData.append("nama", nama);
    formData.append("kelas", kelas);

    try {
      const res = await fetch(scriptURL, { method: "POST", body: formData });
      const data = await res.json();

      if (data.status === "success") {
        // SIMPAN SESSION
        localStorage.setItem("user_skyemperor", JSON.stringify({
          nama: data.nama,
          kelas: data.kelas
        }));
        window.location.href = "gacha.html"; // Pindah ke halaman gacha
      } else {
        alert("Login Gagal: " + data.message);
      }
    } catch (err) {
      console.error(err);
      alert("Terjadi kesalahan koneksi.");
    } finally {
      btn.textContent = "Login";
      btn.disabled = false;
    }
  });
</script>